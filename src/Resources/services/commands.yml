services:
    karma.command.help:
        class: 'ThinFrame\Karma\Command\Help'
        arguments: ['@cli.commander']
        tags:
            - { name: 'cli.command' }

    karma.command.server:
        class: 'ThinFrame\Karma\Command\Server\Main'
        tags:
            - { name: 'cli.command' }

    karma.command.server.start:
        class: 'ThinFrame\Karma\Command\Server\Start'
        arguments: ['@karma.manager.server']
        tags:
            - { name: 'cli.child_command', parent: 'karma.command.server' }
        calls:
            - [ 'setOutputFile',['%thinframe.server.output_file%']]
            - [ 'setErrorFile',['%thinframe.server.error_file%']]

    karma.command.server.stop:
        class: 'ThinFrame\Karma\Command\Server\Stop'
        arguments: ['@karma.manager.server']
        tags:
            - { name: 'cli.child_command', parent: 'karma.command.server' }

    karma.command.server.restart:
        class: 'ThinFrame\Karma\Command\Server\Restart'
        arguments: ['@karma.manager.server']
        tags:
            - { name: 'cli.child_command', parent: 'karma.command.server' }

    karma.command.server.status:
        class: 'ThinFrame\Karma\Command\Server\Status'
        arguments: ['@karma.manager.server']
        tags:
            - { name: 'cli.child_command', parent: 'karma.command.server' }

    karma.command.debug:
        class: 'ThinFrame\Karma\Command\Debug\Main'
        tags:
            - { name: 'cli.command' }

    karma.command.debug.applications:
        class: 'ThinFrame\Karma\Command\Debug\Applications\Main'
        tags:
            - { name: 'cli.child_command', parent: 'karma.command.debug' }

    karma.command.debug.applications.metadata:
        class: 'ThinFrame\Karma\Command\Debug\Applications\Metadata'
        tags:
            - { name: 'cli.child_command', parent: 'karma.command.debug.applications' }